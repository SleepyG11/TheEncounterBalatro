[manifest]
version = "1.0.0"
dump_lua = true
priority = 0

# G.FUNCS.toggle_shop
[[patches]]
[patches.pattern]
target = "functions/button_callbacks.lua"
pattern = "G.STATE = G.STATES.BLIND_SELECT"
position = 'after'
payload = '''
G.STATE = G.STATES.ENC_EVENT_SELECT
'''
match_indent = true

# Game:update
[[patches]]
[patches.pattern]
target = 'game.lua'
position = 'before'
pattern = '''if self.STATE == self.STATES.PLAY_TAROT then'''
payload = '''
if self.STATE == self.STATES.ENC_EVENT then
  self:update_enc_event(dt)
end
'''
match_indent = true

# # G.FUNCS.use_card: hide events
# [[patches]]
# [patches.pattern]
# target = 'functions/button_callbacks.lua'
# position = 'before'
# pattern = '''if G.shop and not G.shop.alignment.offset.py then'''
# payload = '''
# if G.enc_event_blind_select and not G.enc_event_blind_select.alignment.offset.py then
#     G.enc_event_blind_select.alignment.offset.py = G.enc_event_blind_select.alignment.offset.y
#     G.enc_event_blind_select.alignment.offset.y = G.ROOM.T.y + 39
# end
# '''
# match_indent = true

# # G.FUNCS.use_card: show events
# [[patches]]
# [patches.pattern]
# target = 'functions/button_callbacks.lua'
# position = 'before'
# pattern = '''if area and area.cards[1] then'''
# payload = '''
# if G.enc_event_blind_select then
#     G.enc_event_blind_select.alignment.offset.y = G.enc_event_blind_select.alignment.offset.py
#     G.enc_event_blind_select.alignment.offset.py = nil
# end
# '''
# match_indent = true
